# FF14 コスモエクスプローラー・ダッシュボード

FF14のコスモエクスプローラーにおける金策とタスク管理を効率化するためのローカルダッシュボードです。天候予報、ミッションスケジュール、最新のマーケット価格（Universalis API連携）を統合し、最適な金策タスクをリアルタイムで提案します。

---

## 🌟 主な機能

### 1. 天候EX+ 発生予報
- **監視エリア**: テンペスト（オイジュス）、東ザナラーン（パエンナ）、ウルティマ・トゥーレ
- 特定の天候条件が今後6時間以内に発生するかをET（エオルゼア時間）で予測します。

### 2. 金策特化の動的レコメンド
- **最高金策の自動算出**: Universalisから取得した最新のマーケット価格と「販売速度（1日の流通数）」を元に、今最も交換効率が良いアイテムを特定します。
- **メカオペ・アラート**: LT（現実時間）の毎時16/36/56分に開催されるメカオペの予定を表示し、獲得クレジットを現在の最高効率でギル換算してモチベーションを高めます。
- **ミッション提案**: 現在のETで発生中の高ランクミッション（EX+/Aランク）を、指定の6クラス（クラフター: 革・彫・錬 / ギャザラー: 採・園・漁）に絞って提示します。

### 3. オイジュス・エネルギーパック鑑定
- 「オイジュス・エネルギーパック」をそのまま売るべきか、開封してレアアイテム（地団駄、フェイス鍵）を狙うべきかを、**二段構え抽選モデルによる期待値（EV）**から判定します。

### 4. マーケットデータ一覧（JPリージョン対応）
- コスモクレジット交換アイテムの最新価格、1クレジットあたりのギル単価、販売速度を表示します。
- レアアイテム（証書、認証鍵、マウント等）の価格監視も可能です。

---

## 🚀 セットアップと実行方法

### 必須環境
- Python 3.10 以上
- 以下のPythonライブラリが必要です：
  ```bash
  pip install EorzeaEnv
  ```

### 実行手順
1. このディレクトリでターミナル（Powershell等）を開きます。
2. サーバーを起動します：
   ```bash
   python weather_fetcher.py
   ```
3. ブラウザで以下のURLにアクセスします：
   [http://localhost:8000](http://localhost:8000)

---

## 📊 技術仕様・API制約への配慮

- **データ元**: Universalis API (マーケット価格), XIVAPI (アイテム情報等), EorzeaEnv (天候/ET計算)
- **API負荷軽減**: 通信はバルク取得（一括取得）で行い、取得したデータは**5分間キャッシュ**されます。秒間リクエスト制限や同時接続数制限を遵守する設計です。
- **販売速度（Velocity）**: 直近50件の取引履歴から1日あたりの平均販売数を算出し、価格が高くても売れないアイテムがレコメンドされないようスコアリングされています。

---

## ⚠️ 免責事項

- 本ツールは個人利用を目的としており、マーケット価格の急激な変動や計算モデルの推定値と実際の結果が異なる場合があります。最終的な判断はゲーム内の相場を確認した上で行ってください。
