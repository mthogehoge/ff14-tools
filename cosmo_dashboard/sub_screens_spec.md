# FFXIV ツールポータル＆サブ画面 仕様書

本ドキュメントでは、コスモエクスプローラー・ダッシュボード以外の「サブ画面（ポータルサイトおよび各種検索・計算ツール）」の要件や仕様について解説します。

---

## 1. FFXIV ツールポータル (Portal)
**URL:** `http://localhost:8000/portal/index.html` (またはルートパス等からアクセス)

全てのスクリプト機能へアクセスするためのスタート地点となる静的なランディングページ（ハブ）です。直感的なモダンUIを採用しています。

### 搭載されているリンクメニュー
1. **コスモ・ダッシュボード (稼働中)**
   - 本システムのコアである「天候EX+予報」および「リアルタイム金策計算」ダッシュボードへのリンク。
2. **アイテムID辞書 (静的データ)**
   - Universalis及びTeamcraftからスクレイピングして生成された全1017件の素材・アイテムIDが記録されているローカルJSONファイルへの直リンク。データ解析用ツールキット等のベースとして利用。
3. **新式装備（コートリーラヴァー）相場 (リアルタイム)**
   - 独自のPythonバックエンドを経由して構築された「最新の新式装備一覧」画面へのリンク。
4. **製作リーヴ納品一覧 (New!)**
   - 過去の拡張パッケージも含めた全てのクラフター対応の「リーヴ納品」アイテム絞り込み用UI。
5. **グランドカンパニー 納品リスト一覧 (New!)**
   - 全ギャザクラ11クラスの「1日1回の調達任務（グラカン納品）」において、現在のレベルに応じた要求アイテムを瞬時に割り出す画面。

---

## 2. 製作リーヴ納品一覧表 (Levequests Database)
**URL:** `http://localhost:8000/levequests/index.html`

新生～黄金のレガシーまでのあらゆる「製作稼業リーヴ」で要求される納品アイテムを即座に引き出せるデータベース画面です。

### 主な機能と仕様
- **完全なるクロスフィルタリング機構**
  パッチ・拡張タブ（新生、蒼天、紅蓮、漆黒、暁月、黄金）× ジョブタブ（木工、鍛冶、甲冑など全8種）を掛け合わせて、目的のレベル帯の納品アイテムをワンクリックで絞り込めます。
- **データ構造**
  バックグラウンドのJSONファイルからデータを読み込み、JSによってDOMコンテンツを動的に生成します。
- **UI表示内容**
  - **レベル帯ラベル（大口対応表記）**：「Lv90（大口）」のように一目で大口依頼か否かが分かります。
  - **クエスト名と報酬**：クエストの固有名詞を記載。
  - **納品アイテム名と個数**：「〇〇 x 3」など必要な素材数を明記。
- **インフラ要件**
  Cosmo Dashboardと同じPythonローカルサーバー（Port:8000）で一括ホストされており、ローカル環境でもCORSエラーを起こさずにスムーズなデータ読み込みを実現しています。

---

## 3. グランドカンパニー納品リスト一覧 (GC Supply List)
**URL:** `http://localhost:8000/levequests/gc_supply.html`

プレイヤーのクラフター・ギャザラーの「現在のレベル」を入力するだけで、調達任務で要求される可能性のあるアイテムを即座に一覧表示するサポートUIです。

### 主な機能と仕様
- **インテリジェント・レベルセレクター**
  画面左側のサイドバーに「レベルJump」メニュー（1-10, 11-20...）が追従して配置さしており、膨大なリストから特定のレベル帯へ一瞬でスクロール可能です。
- **クラス別分類表示**
  クラフター8種、ギャザラー3種（採掘・園芸・漁師）の全11クラスについて、Lv1〜Lv100まで段階的に要求されるアイテムデータを網羅しています。
- **UIコンポーネント**
  - `<div class="class-title">` によってクラスごとに視覚的に分離。
  - アイテム群はグリッドレイアウトで配置され、各アイテムには対応する「Lvバッジ（例：Lv73）」がカラフルに付与されます。
  - 動的にJSでDOM生成する拡張機能を持っており、更新やJSON差し替えにも強い構造となっています。

---

## 4. 新式装備（コートリーラヴァー）相場 (Crafted Gear Tracker)
**URL:** `http://localhost:8000/craft`

FF14内の最新クラフター専用「新式装備」のマーケットボード最安値をリアルタイムで追跡する動的画面です。

### 主な機能と仕様
- **Universalis連動機能**
  `weather_fetcher.py` の裏側で動作しているバックグラウンドタスクが、設定されたアイテムID（コートリーラヴァー・シリーズ等）を直接Universalis APIに問い合わせます。
- **相場一覧・計算機能**
  取得された最新の最安値（ManaDCなどの指定データセンター）を画面にリストアップし、製作難易度と利益率を比較する指標として活用できます。
- **動的生成ルート**
  本アクセスは単純なHTML配信ではなく、Pythonの `http.server` 側でルーティング処理（`/craft` エンドポイント）が実装されており、リアルタイムに構築されたHTMLをブラウザへ返却しています。
